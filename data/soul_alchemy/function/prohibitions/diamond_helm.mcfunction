execute if items entity @s armor.head diamond_helmet if data entity @s {Tags:["prohibit_armor_2"]} run item modify entity @s armor.head {function:"minecraft:set_attributes",modifiers:[{"id": "prohibition_move_speed_helm","attribute": "minecraft:movement_speed","amount": -0.13,"operation": "add_multiplied_base","slot": "head"},{"id": "prohibition_attack_speed_helm","attribute": "minecraft:attack_speed","amount": -0.04,"operation": "add_multiplied_base","slot": "head"}],"replace": false}

execute if items entity @s armor.head diamond_helmet unless data entity @s {Tags:["prohibit_armor_2"]} run item modify entity @s armor.head {function:"minecraft:set_attributes",modifiers:[{"id": "prohibition_move_speed_helm","attribute": "minecraft:movement_speed","amount": 0,"operation": "add_multiplied_base","slot": "head"},{"id": "prohibition_attack_speed_helm","attribute": "minecraft:attack_speed","amount": 0,"operation": "add_multiplied_base","slot": "head"}],"replace": false}

advancement revoke @s only soul_alchemy:unspoken/prohibitions/diamond_helm